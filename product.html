<!DOCTYPE html>
<html lang="en"> 
<head>
    <link rel="stylesheet" href="product.css" type="text/css">
    <meta charset="UTF-8">
    <title>Fourth-Dimensional Pocket</title>  
</head>
<body>
    <header>Fourth-Dimensional Pocket</header>
    <div class="content">
        <nav class="menu">
            <p>Categories</p>
            <ui id="menuList"></ui>        
        </nav>
        <section>
                <section class="dropdown">
    
                        <button class="dropbtn">Shopping List $2</button>
    
                        <div class="dropdown-content">
                            <p>Shopping List (Total:$2.0)</p>
                            <table>
                                    <tr><td>Dokodemo door</td>  <td>Quantity: <input type="number"> @1.0</td></li>
                                    <tr><td>Time Machine</td>  <td>Quantity: <input type="number"> @2.0</td></li>
                            </table>
                            <button>Checkout</button>        
                        </div>    
    
                </section>    
                <hr>
                <p><a href = "main.html">Home</a> > <a href = "main.html">Travel</a> > <a href = "product.html">Dokodemo Door</a></p>
                <div class="product" id ="product">
                </div>
            
        </section>
        
    </div>
    <footer>Doraemon</footer>
    <script type="text/javascript" src="incl/myLib.js"></script>
    <script type="text/javascript">
    (function(){
    
        function updateUI() {
            myLib.get({action:'cat_fetchall'}, function(json){
                // loop over the server response json
                //   the expected format (as shown in Firebug): 
                for (var listItems = [],i = 0, cat; cat = json[i]; i++) {
                    //<li><a href="weapon.html">Weapon</a></li>
                    //listItems.push('<li id="cat' , parseInt(cat.catid) , '"><span class="name">' , cat.name.escapeHTML() , '</span> <span class="delete">[Delete]</span> <span class="edit">[Edit]</span></li>');
                    listItems.push('<li id="cat',parseInt(cat.catid),'"><span class="name">',cat.name.escapeHTML(),'</span></li>');
                }
                el('menuList').innerHTML = listItems.join('');
            });
                
        }
        function updateProduct(){
            var xmlHttp = new XMLHttpRequest();
            url = window.location.href;
            str = url.split('?pid=');
            pid = str[1];
			xmlHttp.onreadystatechange = function() { 
				if (xmlHttp.readyState == 4 && xmlHttp.status == 200){
                    result = xmlHttp.responseText.split('while(1);');
					result = JSON.parse(result[1]);
                    result = result["success"];
		
                    for (var listItems = [], i = 0, prod; prod = result[i]; i++) {
                        listItems.push('<img src="incl/img/',parseInt(result[0].pid),'.jpg"></img><div><p>',result[0].name.escapeHTML(),'</p><table><tr><td><p>$ ',parseInt(result[0].price),'</p></td> <td><button>Add to Cart</button></td></table><p>',result[0].decription,'</p></div>');
                    }
                    el('product').innerHTML = listItems.join('');
                }
			}
			xmlHttp.open("GET", "product.php?action=prod_fetchone&pid="+pid, true); // true for asynchronous 
            xmlHttp.send();
        }
    updateUI();
    updateProduct();    
        
    
    })();
    </script> 
    </body>
    </html>